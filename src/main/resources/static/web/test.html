<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>智能归档平台注册页</title>
    <link href="/static/web/css/style.css" rel="stylesheet">
    <link href="/static/web/css/page/backend/login.css" rel="stylesheet">
    <script>
        function checkForm() {
            var patten = /^[a-zA-Z]\w{3,15}$/ig;
            var username = document.getElementById("username").value;
            if (username == ""){
                alert("用户名不可为空！");
                return false;
            }else if (!patten.test(username)){
                alert("用户名非法！");
                return false;
            }
        }

        function showUserTips(){

            document.getElementById("userTips").innerHTML = "用户名必填";
        }

        function checkName(){
            var patten = /^[a-zA-Z]\w{3,15}$/ig;
            var username = document.getElementById("username").value;
            if (username == ""){
                document.getElementById("userTips").innerHTML = "<font color='#b22222'>用户名错误</font>";
                return false;
            }else if (!patten.test(username)){
                alert("用户名非法！");
                return false;
            }else{
                document.getElementById("pwdErr").innerHTML = "用户名必填";
            }
            document.getElementById("pwdErr").innerHTML = "";

        }

        function checkPwd() {
            var pwd1 = document.getElementById("password").value;
            var pwd2 = document.getElementById("confirmPwd").value;
            if (pwd1 != pwd2){
                document.getElementById("pwdErr").innerHTML = "密码不相同";
            }else{
                document.getElementById("pwdErr").innerHTML = "";
            }
        }
    </script>
</head>
<body>

<!--导航栏部分-->

<div id="hd">
    <div class="logo main-content">
        <h1><a href="../index.html" title="管理平台">账号注册</a></h1>
        <ul class="head-link">
            <li><a href="">平台首页</a></li>
            <li><a href="">帮助中心</a></li>
        </ul>
    </div>
</div>

<div id="regbd" class="login-bd">
    <div class="main-content">
        <div class="input-box" height="350px">
            <div class="input-hd"><h2>用户注册</h2></div>

            <div class="input-area">
                <form name="regForm" method="post" action="/user/addUser" >
                    <!--登陆表单-->
                    <div class="input-item">
                        <p>登录名：</p>
                        <input type="text" id="username" name="username" placeholder="请输入账号/邮箱" onfocus="showUserTips()" onblur="checkName()"><span id="userTips"></span>
                    </div>

                    <div class="input-item">
                        <p>登录密码：</p>
                        <input type="text" id="password" name="userpwd" placeholder="请输入密码" >
                    </div>

                    <div class="input-item">
                        <p>确认登录密码：</p>
                        <input type="text" name="confirmPwd" placeholder="请再输入密码" onblur="checkPwd()"><span id="pwdErr"></span>
                    </div>

                    <div class="login-btn" >
                        <input type="submit" value="注册" onsubmit="register()" style="color: #fff;background: #00a2ca">
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>


<!--版权信息部分-->
<div id="ft" class="login-ft">
    <div class="footer-copyright">
        <p class="clearfix links">
            <a href="javascript:;" target="_blank">关于我们</a>
            <a href="javascript:;" target="_blank">法律声明</a>
            <a href="javascript:;">服务条款</a>
            <a href="javascript:;" target="_blank">联系方式</a>
        </p>
        <p style="font-family:arial;">地址：北京市海淀区中关村南大街5号&nbsp;&nbsp;2009-2019&nbsp;<a
                href="http://www.bit.edu.cn/">北京理工大学</a>&nbsp;版权所有&nbsp;
        </p>
        <p style="font-family:arial;">计算机学院实验室&nbsp;&nbsp;智能管理平台&nbsp;&nbsp;版权所有</p>
    </div>
</div>
</body>

<script>
    function register(){
        var jsonObj = {"username": $('#username').val(), "userpwd": $('#password').val()};
        print(jsonObj)
        $.ajax({
            type: 'POST',
            url: "/user/register",
            dataType: "json",
            contentType : "application/json",
            data: JSON.stringify(jsonObj),
            success: function(data) {
                console.log(data)
            },
            error: function() {
                console.log("fucking error")
            }
        });
    }
</script>
</html>


